3. Дополнить юнит-файл apache httpd возможностьб запустить несколько инстансов сервера с разными конфигами

Изменим в файл сервиса httpd одну строчку:
добвляем -%I к
EnvironmentFile=/etc/sysconfig/httpd

  [root@centos romak]# mcedit /usr/lib/systemd/system/httpd.service

  [Unit]
  Description=The Apache HTTP Server
  After=network.target remote-fs.target nss-lookup.target
  Documentation=man:httpd(8)
  Documentation=man:apachectl(8)

  [Service]
  Type=notify
  EnvironmentFile=/etc/sysconfig/httpd-%I
  ExecStart=/usr/sbin/httpd $OPTIONS -DFOREGROUND
  ExecReload=/usr/sbin/httpd $OPTIONS -k graceful
  ExecStop=/bin/kill -WINCH ${MAINPID}
  # We want systemd to give httpd some time to finish gracefully, but still want
  # it to kill httpd after TimeoutStopSec if something went wrong during the
  # graceful stop. Normally, Systemd sends SIGTERM signal right after the
  # ExecStop, which would kill httpd. We are sending useless SIGCONT here to give
  # httpd time to finish.
  KillSignal=SIGCONT
  PrivateTmp=true

  [Install]
  WantedBy=multi-user.target

Копируем файл окружения /etc/sysconfig/httpd

  [root@centos romak]# [root@centos romak]#
  [root@centos romak]# cp /etc/sysconfig/httpd /etc/sysconfig/httpd-1
  [root@centos romak]# cp /etc/sysconfig/httpd /etc/sysconfig/httpd-2
  [root@centos romak]#
  
  
  
  
  
  
  
[root@centos romak]# cat /etc/sysconfig/httpd-1

OPTIONS=-f conf/first.conf
LANG=C

[root@centos romak]# cat /etc/sysconfig/httpd-2

OPTIONS=-f conf/second.conf
LANG=C

[root@centos romak]#
  
  
  
  
  
  
  
